{"meta":{"title":"SeoWonğŸ’•, SeoHunğŸ’•, EunAğŸ’•","subtitle":null,"description":null,"author":"ê³ ì¬ì„±","url":"http://kjs850.github.io"},"pages":[],"posts":[{"title":"java memory êµ¬ì¡°","slug":"java-memory-êµ¬ì¡°","date":"2018-12-13T10:23:07.769Z","updated":"2018-12-13T10:23:07.769Z","comments":true,"path":"2018/12/13/java-memory-êµ¬ì¡°/","link":"","permalink":"http://kjs850.github.io/2018/12/13/java-memory-êµ¬ì¡°/","excerpt":"","text":"date: 2018-12-13 16:15:25 ë©”ëª¨ë¦¬ êµ¬ì¡° JVMì€ OSë¡œë¶€í„° ë°›ì€ ë©”ëª¨ë¦¬ë¥¼ ë‚˜ëˆ„ì–´ê´€ë¦¬í•œë‹¤.ì´ ë©”ëª¨ë¦¬ê³µê°„ì€â€¦ Runtime Data Area ë¼ê³  í•˜ëŠ”ë° ì´ë¥¼ 5ê°œ ì˜ì—­ìœ¼ë¡œ ìª¼ê°œì„œ ê´€ë¦¬í•œë‹¤. Method Area(=Class Area) Stack Area Heap Area Native Method Stack Area PC Register í¬ê²ŒëŠ” ë©”ì†Œë“œì˜ì—­, ìŠ¤íƒì˜ì—­, í™ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆˆë‹¤. ë©”ì†Œë“œ ì˜ì—­í´ë˜ìŠ¤ íŒŒì¼ì˜ ë°”ì´íŠ¸ ì½”ë“œê°€ ë¡œë“œë˜ëŠ” ê³³ ìŠ¤íƒ ì˜ì—­ì§€ì—­ë³€ìˆ˜ì™€ ë§¤ê°œë³€ìˆ˜ê°€ ì €ì¥ëœë‹¤.ì‰½ê²Œ ë§í•´ í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ê³¼ì •ì—ì„œ ì„ì‹œë¡œ í• ë‹¹ë˜ê³  ê·¸ê²Œ ëë‚˜ë©´ ì†Œë©¸ë˜ëŠ” ê²ƒë“¤ì´ ì €ì¥ëœë‹¤.ì¦‰ ë©”ì†Œë“œê°€ í˜¸ì¶œë ë•Œë§ˆë‹¤ ê·¸ ë©”ì†Œë“œì˜ ë¡œì»¬ ë³€ìˆ˜ë¥¼ ì¤€ë¹„í•˜ê³ , ë©”ì†Œë“œ í˜¸ì¶œì´ ëë‚˜ë©´ ê·¸ ë©”ì†Œë“œë¥¼ ìœ„í•´ ì¤€ë¹„í–ˆë˜ ëª¨ë“ ë³€ìˆ˜ê°€ ìŠ¤íƒì—ì„œ ì œê±° ëœë‹¤. ì°¸ì¡°ë³€ìˆ˜ì— ì €ì¥ë˜ëŠ” ë©”ëª¨ë¦¬ì£¼ì†ŒëŠ” ìŠ¤íƒì˜ì—­ì— ì €ì¥ë˜ì§€ë§Œ, ê·¸ ì£¼ì†Œê°€ ê°€ë¦¬í‚¤ëŠ” ë©”ëª¨ë¦¬ëŠ” ëª¨ë‘ í™ ì˜ì—­ì— ì €ì¥ëœë‹¤. í™ ì˜ì—­í”íˆ ì½”ë“œì—ì„œ new ëª…ë ¹ì„ í†µí•´ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ê°€ ë†“ì¸ë‹¤.í™ ì˜ì—­ì— ë³´ê´€ë˜ëŠ” ë©”ëª¨ë¦¬ëŠ” ë©”ì†Œë“œ í˜¸ì¶œì´ ëë‚˜ë„ ì‚¬ë¼ì§€ì§€ ì•Šê³  ìœ ì§€ëœë‹¤.ì–¸ì œê¹Œì§€?ê°€ë¹„ì§€ ì»¬ë ‰í„°ì— ì˜í•´ì„œ ì§€ì›Œì§ˆë•Œ ê¹Œì§€.. ì°¸ê³ 8ê°€ì§€ ì›ì‹œíƒ€ì…(primitive type).. byte, short, int, long, float, double, char, boolean..ì„ ì œì™¸í•œ ê·¸ì™¸ì˜ íƒ€ì…ìœ¼ë¡œ ì •ì˜ëœ ë³€ìˆ˜ë“¤ì€ ëª¨ì¡°ë¦¬ ë ˆí¼ëŸ°ìŠ¤ ë³€ìˆ˜, ì¦‰ ì°¸ì¡°ë³€ìˆ˜ì´ë‹¤. Primitiveì™€ Boxed Primitives ë‘˜ ì¤‘ ë¬´ì—‡ì„ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?ìŠ¤íƒ ì˜ì—­ì— ì €ì¥ë˜ëŠ” Primitive(ê¸°ë³¸ìë£Œí˜•)ê³¼ í™ì˜ì—­ì— ì €ì¥ë˜ëŠ” Boxed Primitives(ê°ì²´í˜•)ê°„ì—ëŠ” ë©”ëª¨ë¦¬ íš¨ìœ¨ê³¼ ì ‘ê·¼ì†ë„ë©´ì—ì„œ Primitive Typeì´ ë›°ì–´ë‚˜ë‹¤. reference http://wanzargen.tistory.com/16?category=700063 http://wanzargen.tistory.com/17?category=700063 http://www.jpstory.net/2013/02/07/primitive-vs-boxed-primitives/ (ìë°” Primitive Typeê³¼ Boxed Primitives ë‘˜ ì¤‘ ë¬´ì—‡ì„ ì‚¬ìš©í• ê¹Œ?) tags:","categories":[],"tags":[]},{"title":"Java Garbage Collection","slug":"Java-Garbage-Collection","date":"2018-12-13T09:33:02.872Z","updated":"2018-12-13T09:33:02.872Z","comments":true,"path":"2018/12/13/Java-Garbage-Collection/","link":"","permalink":"http://kjs850.github.io/2018/12/13/Java-Garbage-Collection/","excerpt":"","text":"date: 2018-12-11 14:17:31 ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ê³¼ì • - Generational Garbage Collectionê°€ë¹„ì§€ ì»¬ë ‰í„°ëŠ” ë‘ ê°€ì§€ ê°€ì„¤ í•˜ì— ë§Œë“¤ì–´ì¡Œë‹¤ ëŒ€ë¶€ë¶„ì˜ ê°ì²´ëŠ” ê¸ˆë°© ì ‘ê·¼ ë¶ˆê°€ëŠ¥ ìƒíƒœ(unreachable)ê°€ ëœë‹¤. ì˜¤ë˜ëœ ê°ì²´ì—ì„œ ì Šì€ ê°ì²´ë¡œì˜ ì°¸ì¡°ëŠ” ì•„ì£¼ ì ê²Œ ì¡´ì¬í•œë‹¤. ì´ëŸ¬í•œ ê°€ì„¤ì„ â€˜weak generational hypothesisâ€™ë¼ í•œë‹¤. ì´ ê°€ì„¤ì˜ ì¥ì ì„ ìµœëŒ€í•œ ì‚´ë¦¬ê¸° ìœ„í•´ì„œ HotSpot VMì—ì„œëŠ” í¬ê²Œ 2ê°œë¡œ ë¬¼ë¦¬ì  ê³µê°„ì„ ë‚˜ëˆ„ì—ˆë‹¤.ë‘˜ë¡œ ë‚˜ëˆˆ ê³µê°„ì´ Young ì˜ì—­ê³¼ Old ì˜ì—­ì´ë‹¤. Young ì˜ì—­(Yong Generation ì˜ì—­):ìƒˆë¡­ê²Œ ìƒì„±í•œ ê°ì²´ì˜ ëŒ€ë¶€ë¶„ì´ ì—¬ê¸°ì— ìœ„ì¹˜í•œë‹¤.ëŒ€ë¶€ë¶„ì˜ ê°ì²´ê°€ ê¸ˆë°© ì ‘ê·¼ ë¶ˆê°€ëŠ¥ ìƒíƒœê°€ ë˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ë§ì€ ê°ì²´ê°€ young ì˜ì—­ì—ìƒì„±ë˜ì—ˆë‹¤ê°€ ì‚¬ë¼ì§„ë‹¤.ì´ ì˜ì—­ì—ì„œ ê°ì²´ê°€ ì‚¬ë¼ì§ˆë•Œ Minor GCê°€ ë°œìƒí•œë‹¤ê³  ë§í•œë‹¤. Old ì˜ì—­(Old Generation ì˜ì—­):ì ‘ê·¼ ë¶ˆê°€ëŠ¥ ìƒíƒœë¡œ ë˜ì§€ ì•Šì•„ Young ì˜ì—­ì—ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ê°€ ì—¬ê¸°ë¡œ ë³µì‚¬ëœë‹¤.ëŒ€ë¶€ë¶„ Youngì˜ì—­ë³´ë‹¤ í¬ê²Œ í• ë‹¹í•˜ë©°, í¬ê¸°ê°€ í° ë§Œí¼ Young ì˜ì—­ë³´ë‹¤ GCëŠ” ì ê²Œ ë°œìƒí•œë‹¤.ì´ ì˜ì—­ì—ì„œ ê°ì²´ê°€ ì‚¬ë¼ì§ˆ ë•Œ Major GC(í˜¹ì€ Full GC)ê°€ ë°œìƒí•œë‹¤ê³  ë§í•œë‹¤. Permanent Generation ì˜ì—­(ì´í•˜ Perm ì˜ì—­)Method Area(ë©”ì†Œë“œ ì˜ì—­)ë¼ê³ ë„ í•œë‹¤.ê°ì²´ë‚˜ ì–µë¥˜(intern)ëœ ë¬¸ìì—´ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ê³³ì´ë©°, Old ì˜ì—­ì—ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ê°€ ì˜ì›íˆ ë‚¨ì•„ ìˆëŠ”ê³³ì€ ì ˆëŒ€ ì•„ë‹ˆë‹¤.ì´ ì˜ì—­ì—ì„œ GCê°€ ë°œìƒí• ìˆ˜ë„ ìˆëŠ”ë°, ì—¬ê¸°ì„œ GCê°€ ë°œìƒí•´ë„ Major GCì˜ íšŸìˆ˜ì— í¬í•¨ëœë‹¤. â€œOld ì˜ì—­ì— ìˆëŠ” ê°ì²´ê°€ Young ì˜ì—­ì˜ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°ê°€ ìˆì„ ë•Œì—ëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬ë ê¹Œ?â€ì¹´ë“œ í…Œì´ë¸”ì´ ì¡´ì¬í•˜ê³  ì¹´ë“œ í…Œì´ë¸”ì—ëŠ” Oldì˜ì—­ì— ìˆëŠ” ê°ì²´ê°€ Youngì˜ì—­ì˜ ê°ì²´ë¥¼ ì°¸ì¡°í•  ë•Œë§ˆë‹¤ ì •ë³´ë¥¼ í‘œì‹œí•œë‹¤.Youngì˜ì—­ì˜ GCë¥¼ ì‹¤í–‰í• ë•ŒëŠ” Oldì˜ì—­ì— ìˆëŠ” ëª¨ë“  ê°ì²´ì˜ ì°¸ì¡°ë¥¼ í™•ì¸í•˜ì§€ ì•Šê³ , ì¹´ë“œ í…Œì´ë¸”ë§Œ ë’¤ì ¸ì„œ GC ëŒ€ìƒì¸ì§€ ì‹ë³„í•œë‹¤.ì¹´ë“œ í…Œì´ë¸”ì€ write barrierë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ë¦¬í•œë‹¤ Young ì˜ì—­ì˜ êµ¬ì„±3ê°œë¡œ ë‚˜ë‰¨ Eden ì˜ì—­ Survivor ì˜ì—­ 2ê°œ ì•„ë˜ì™€ ê°™ì€ ê³¼ì •ì„ ê±°ì¹œë‹¤. ìƒˆë¡œ ìƒì„±í•œ ëŒ€ë¶€ë¶„ì˜ ê°ì²´ëŠ” Eden ì˜ì—­ì— ìœ„ì¹˜í•œë‹¤. Eden ì˜ì—­ì—ì„œ GCê°€ í•œ ë²ˆ ë°œìƒí•œ í›„ ì‚´ì•„ë‚¨ì€ ê°ì²´ëŠ” Survivor ì˜ì—­ ì¤‘ í•˜ë‚˜ë¡œ ì´ë™ëœë‹¤. Eden ì˜ì—­ì—ì„œ GCê°€ ë°œìƒí•˜ë©´ ì´ë¯¸ ì‚´ì•„ë‚¨ì€ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” Survivor ì˜ì—­ìœ¼ë¡œ ê°ì²´ê°€ ê³„ì† ìŒ“ì¸ë‹¤. í•˜ë‚˜ì˜ Survivor ì˜ì—­ì´ ê°€ë“ ì°¨ê²Œ ë˜ë©´ ê·¸ ì¤‘ì—ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ë¥¼ ë‹¤ë¥¸ Survivor ì˜ì—­ìœ¼ë¡œ ì´ë™í•œë‹¤. ê·¸ë¦¬ê³  ê°€ë“ ì°¬ Survivor ì˜ì—­ì€ ì•„ë¬´ ë°ì´í„°ë„ ì—†ëŠ” ìƒíƒœë¡œ ëœë‹¤. ì´ ê³¼ì •ì„ ë°˜ë³µí•˜ë‹¤ê°€ ê³„ì†í•´ì„œ ì‚´ì•„ë‚¨ì•„ ìˆëŠ” ê°ì²´ëŠ” Old ì˜ì—­ìœ¼ë¡œ ì´ë™í•˜ê²Œ ëœë‹¤. HotSpot VMì—ì„œëŠ” ë³´ë‹¤ ë¹ ë¥¸ ë©”ëª¨ë¦¬ í• ë‹¹ì„ ìœ„í•´ì„œ ë‘ ê°€ì§€ ê¸°ìˆ ì„ ì‚¬ìš©í•œë‹¤ bump-the-pointer TLABs(Thread-Local Allocation Buffers) Old ì˜ì—­ì— ëŒ€í•œ GCGC ë°©ì‹ì€ JDK 7ì„ ê¸°ì¤€ìœ¼ë¡œ 5ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤. Serial GC : ìš´ì˜ ì„œë²„ì—ì„œ ì ˆëŒ€ ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ë°©ì‹ì´ Serial GCë‹¤. Serial GCëŠ” ë°ìŠ¤í¬í†±ì˜ CPU ì½”ì–´ê°€ í•˜ë‚˜ë§Œ ìˆì„ ë•Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë§Œë“  ë°©ì‹ì´ë‹¤. Serial GCë¥¼ ì‚¬ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì´ ë§ì´ ë–¨ì–´ì§„ë‹¤. Parallel GC Parallel Old GC(Parallel Compacting GC) Concurrent Mark &amp; Sweep GC(ì´í•˜ CMS) G1(Garbage First) GC Serial GC (-XX:+UseSerialGC)Young ì˜ì—­ì—ì„œì˜ GCëŠ” ì• ì ˆì—ì„œ ì„¤ëª…í•œ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.(Young ì˜ì—­ì˜ GCë¥¼ ì‹¤í–‰í•  ë•Œì—ëŠ” Old ì˜ì—­ì— ìˆëŠ” ëª¨ë“  ê°ì²´ì˜ ì°¸ì¡°ë¥¼ í™•ì¸í•˜ì§€ ì•Šê³ , ì´ ì¹´ë“œ í…Œì´ë¸”ë§Œ ë’¤ì ¸ì„œ GC ëŒ€ìƒì¸ì§€ ì‹ë³„í•œë‹¤.)Old ì˜ì—­ì˜ GCëŠ” mark-sweep-compactì´ë¼ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•œë‹¤.mark : Old ì˜ì—­ì— ì‚´ì•„ ìˆëŠ” ê°ì²´ë¥¼ ì‹ë³„sweep : í™(heap)ì˜ ì• ë¶€ë¶„ë¶€í„° í™•ì¸í•˜ì—¬ ì‚´ì•„ ìˆëŠ” ê²ƒë§Œ ë‚¨ê¸´ë‹¤compaction : ê° ê°ì²´ë“¤ì´ ì—°ì†ë˜ê²Œ ìŒ“ì´ë„ë¡ í™ì˜ ê°€ì¥ ì• ë¶€ë¶„ë¶€í„° ì±„ì›Œì„œ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” ë¶€ë¶„ê³¼ ê°ì²´ê°€ ì—†ëŠ” ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆˆë‹¤ Parallel GC (-XX:+UseParallelGC)Serial GCì™€ ê¸°ë³¸ì ì¸ ì•Œê³ ë¦¬ì¦˜ì€ ê°™ë‹¤.ê·¸ëŸ¬ë‚˜ Serial GCëŠ” GCë¥¼ ì²˜ë¦¬í•˜ëŠ” ìŠ¤ë ˆë“œê°€ í•˜ë‚˜ì¸ ê²ƒì— ë¹„í•´, Parallel GCëŠ” GCë¥¼ ì²˜ë¦¬í•˜ëŠ” ì“°ë ˆë“œê°€ ì—¬ëŸ¬ ê°œì´ë‹¤.Parallel GCëŠ” ë©”ëª¨ë¦¬ê°€ ì¶©ë¶„í•˜ê³  ì½”ì–´ì˜ ê°œìˆ˜ê°€ ë§ì„ ë•Œ ìœ ë¦¬í•˜ë‹¤.Throughput GC Parallel Old GC(-XX:+UseParallelOldGC)Parallel Old GCëŠ” JDK 5 update 6ë¶€í„° ì œê³µí•œ GC ë°©ì‹Parallel GCì™€ ë¹„êµí•˜ì—¬ Old ì˜ì—­ì˜ GC ì•Œê³ ë¦¬ì¦˜ë§Œ ë‹¤ë¥´ë‹¤Mark-Summary-CompactionSummary : ì•ì„œ GCë¥¼ ìˆ˜í–‰í•œ ì˜ì—­ì— ëŒ€í•´ì„œ ë³„ë„ë¡œ ì‚´ì•„ ìˆëŠ” ê°ì²´ë¥¼ ì‹ë³„í•œë‹¤. CMS GC (-XX:+UseConcMarkSweepGC)ì´ˆê¸° Initial Mark ë‹¨ê³„ì—ì„œëŠ” â€¦.í´ë˜ìŠ¤ ë¡œë”ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ê°ì²´ ì¤‘ ì‚´ì•„ ìˆëŠ” ê°ì²´ë§Œ ì°¾ëŠ” ê²ƒìœ¼ë¡œ ëë‚¸ë‹¤.ë”°ë¼ì„œ, ë©ˆì¶”ëŠ” ì‹œê°„ì€ ë§¤ìš° ì§§ë‹¤.ê·¸ë¦¬ê³  Concurrent Mark ë‹¨ê³„ì—ì„œëŠ” ë°©ê¸ˆ ì‚´ì•„ìˆë‹¤ê³  í™•ì¸í•œ ê°ì²´ì—ì„œ ì°¸ì¡°í•˜ê³  ìˆëŠ” ê°ì²´ë“¤ì„ ë”°ë¼ê°€ë©´ì„œ í™•ì¸í•œë‹¤.ì´ ë‹¨ê³„ì˜ íŠ¹ì§•ì€ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì—ì„œ ë™ì‹œì— ì§„í–‰ëœë‹¤ëŠ” ê²ƒì´ë‹¤.ê·¸ ë‹¤ìŒ Remark ë‹¨ê³„ì—ì„œëŠ”â€¦. Concurrent Mark ë‹¨ê³„ì—ì„œ ìƒˆë¡œ ì¶”ê°€ë˜ê±°ë‚˜ ì°¸ì¡°ê°€ ëŠê¸´ ê°ì²´ë¥¼ í™•ì¸í•œë‹¤.ë§ˆì§€ë§‰ìœ¼ë¡œ Concurrent Sweep ë‹¨ê³„ì—ì„œëŠ” ì“°ë ˆê¸°ë¥¼ ì •ë¦¬í•˜ëŠ” ì‘ì—…ì„ ì‹¤í–‰í•œë‹¤.ì´ ì‘ì—…ë„ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìƒí™©ì—ì„œ ì§„í–‰í•œë‹¤. ì´ëŸ¬í•œ ë‹¨ê³„ë¡œ ì§„í–‰ë˜ëŠ” GC ë°©ì‹ì´ê¸° ë•Œë¬¸ì— stop-the-world ì‹œê°„ì´ ë§¤ìš° ì§§ë‹¤.ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‘ë‹µ ì†ë„ê°€ ë§¤ìš° ì¤‘ìš”í•  ë•Œ CMS GCë¥¼ ì‚¬ìš©Low Latency GCë¼ê³ ë„ ë¶€ë¥¸ë‹¤. ê·¸ëŸ°ë° CMS GCëŠ” stop-the-world ì‹œê°„ì´ ì§§ë‹¤ëŠ” ì¥ì ì— ë°˜í•´ ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ì ì´ ì¡´ì¬í•œë‹¤. ë‹¤ë¥¸ GC ë°©ì‹ë³´ë‹¤ ë©”ëª¨ë¦¬ì™€ CPUë¥¼ ë” ë§ì´ ì‚¬ìš©í•œë‹¤.Compaction ë‹¨ê³„ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µë˜ì§€ ì•ŠëŠ”ë‹¤.ê·¸ë¦¬ê³  ì¡°ê°ë‚œ ë©”ëª¨ë¦¬ê°€ ë§ì•„ Compaction ì‘ì—…ì„ ì‹¤í–‰í•˜ë©´ ë‹¤ë¥¸ GC ë°©ì‹ì˜ stop-the-world ì‹œê°„ë³´ë‹¤ stop-the-world ì‹œê°„ì´ ë” ê¸¸ê¸° ë•Œë¬¸ì—Compaction ì‘ì—…ì´ ì–¼ë§ˆë‚˜ ìì£¼, ì˜¤ë«ë™ì•ˆ ìˆ˜í–‰ë˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤. G1 GC(-XX:+UseG1GC ) ë‹¤ìŒ ê·¸ë¦¼ì—ì„œ ë³´ë‹¤ì‹œí”¼, G1 GCëŠ” ë°”ë‘‘íŒì˜ ê° ì˜ì—­ì— ê°ì²´ë¥¼ í• ë‹¹í•˜ê³  GCë¥¼ ì‹¤í–‰í•œë‹¤.ê·¸ëŸ¬ë‹¤ê°€, í•´ë‹¹ ì˜ì—­ì´ ê½‰ ì°¨ë©´ ë‹¤ë¥¸ ì˜ì—­ì—ì„œ ê°ì²´ë¥¼ í• ë‹¹í•˜ê³  GCë¥¼ ì‹¤í–‰í•œë‹¤.ì¦‰, ì§€ê¸ˆê¹Œì§€ ì„¤ëª…í•œ Youngì˜ ì„¸ê°€ì§€ ì˜ì—­ì—ì„œ ë°ì´í„°ê°€ Old ì˜ì—­ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë‹¨ê³„ê°€ ì‚¬ë¼ì§„ GC ë°©ì‹ì´ë¼ê³  ì´í•´í•˜ë©´ ëœë‹¤.G1 GCëŠ” ì¥ê¸°ì ìœ¼ë¡œ ë§ë„ ë§ê³  íƒˆë„ ë§ì€ CMS GCë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•´ì„œ ë§Œë“¤ì–´ ì¡Œë‹¤. í™ ì˜ì—­ì´ ë§¤ìš° í° ë¨¸ì‹ (ìµœì†Œ 4GB)ì—ì„œ ëŒë¦¬ê¸°ì— ì í•©í•œ GC.ëŒ€ì‹  CMSì˜ ë‹¨ì ì„ ì–´ëŠ ì •ë„ëŠ” ê·¹ë³µí•´ëƒˆìŠµë‹ˆë‹¤.í™ì— ì˜ì—­(Region) ì´ë¼ëŠ” ê°œë…ì„ ë„ì…í•œ ê²ƒì¸ë°ìš”, í™ì„ ì—¬ëŸ¬ ê°œì˜ Regionìœ¼ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤.ëª‡ ëª‡ Region ì€ Young Generation ì˜ì—­ìœ¼ë¡œ ì“°ì´ê³ , ë‚˜ë¨¸ì§€ ëª‡ ëª‡ Region ì€ Old Generation ì˜ì—­ìœ¼ë¡œ ì“°ì…ë‹ˆë‹¤.Young Generation ì˜ì—­ì„ ì •ë¦¬í•˜ëŠ” ê±´ Parallelì´ë‚˜ CMSì²˜ëŸ¼ ë©€í‹°ì“°ë ˆë“œë¡œ ì •ë¦¬ë¥¼ í•©ë‹ˆë‹¤.(ë­ ë§ˆì°¬ê°€ì§€ë¡œ ì§€ìš¸ê±´ ì§€ìš°ê³ , ê³„ì† ì“°ì´ê³  ìˆëŠ”ê±´ Old Generation ì˜ì—­ìœ¼ë¡œ ì˜®ê¸°ê² ì£ .)ê·¸ë¦¬ê³ , Old Generation ì˜ì—­ì— í•´ë‹¹í•˜ëŠ” Regionì´ ì—¬ëŸ¬ ê°œ ìˆì„ í…ë° CMSì²˜ëŸ¼ ë°±ê·¸ë¼ìš´ë“œ ì“°ë ˆë“œë¡œ ì´ ì˜ì—­ë“¤ì„ ì •ë¦¬ë¥¼ í•©ë‹ˆë‹¤.ê·¸ëŸ°ë° CMSì™€ ì°¨ì´ì ì€ ì¤‘ê°„ ì¤‘ê°„ ì“¸ëª¨ì—†ëŠ” ê°ì²´ë“¤ì„ ì™ì™ ë¹¼ë¨¹ëŠ”ê²Œ ì•„ë‹ˆë¼.í•œ Regionì„ í†µì§¸ë¡œ ì •ë¦¬í•´ ë²„ë¦½ë‹ˆë‹¤.ì°¸ì¡°ê°€ ì—†ëŠ” ê°ì²´ë“¤ì€ ì§€ìš°ê³ , ì‚¬ìš© ì¤‘ì¸ ê°ì²´ëŠ” ë‹¤ë¥¸ Regionìœ¼ë¡œ ê³ ìŠ¤ë€íˆ ë³µì‚¬ë¥¼ í•©ë‹ˆë‹¤.ì´ ë‹¤ë¥¸ Regionìœ¼ë¡œ ì‚¬ìš© ì¤‘ì¸ ê°ì²´ë§Œ ì˜®ê¸°ëŠ” ê³¼ì •ì—ì„œ ì°¨ê³¡ì°¨ê³¡ ì˜®ê¸°ë¯€ë¡œ Compactingì´ ë˜ë¯€ë¡œ ë©”ëª¨ë¦¬ íŒŒí¸í™” í˜„ìƒì´ ìƒê¸°ì§€ ì•ŠëŠ” ê²ƒì´ì£ !ê·¸ë ‡ë‹¤ë©´ CMSì˜ ë¬¸ì œì ì´ì—ˆë˜ CPUë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì°¨ì§€í•œë‹¤(1) ê·¸ë¦¬ê³  ë©”ëª¨ë¦¬íŒŒí¸í™”(2) ì¤‘ì— ë©”ëª¨ë¦¬íŒŒí¸í™”ë¥¼ í•´ê²°í•œ GCê°€ ë˜ê² ë„¤ìš”. ì°¸ê³ ) -XX:+UseStringDeduplication : https://dzone.com/articles/easy-change-to-reduce-memory-by-20 referencehttps://d2.naver.com/helloworld/1329https://12bme.tistory.com/57https://okky.kr/article/379036http://wanzargen.tistory.com/17?category=700063 tags:","categories":[],"tags":[]},{"title":"process and thread","slug":"process-and-thread","date":"2018-12-05T02:09:13.313Z","updated":"2018-12-05T02:09:13.313Z","comments":true,"path":"2018/12/05/process-and-thread/","link":"","permalink":"http://kjs850.github.io/2018/12/05/process-and-thread/","excerpt":"","text":"date: 2018-12-05 11:03:07 ProcessA Process is a program in execution.It has its own address space, a call stack, and link to any resources such as open files.A computer system normally has multiple processes running at a time.The operating system keeps track of all these processes and facilitates their execution by sharing the processing time of the CPU among them. ThreadA thread is a path of execution within a process.Every process has at least one thread - called the main thread. The main thread can create additional threads within the process.Threads within a process share the processâ€™s resources including memory and open files.However, every thread has its own call stack.Since threads share the same address space of the process, creating new threads and communicating between them is more efficient. referencehttps://www.callicoder.com/java-concurrency-multithreading-basics/#processes-and-threads categories: java tags: process thread","categories":[],"tags":[]},{"title":"git squash","slug":"git-squash","date":"2018-12-02T11:45:57.915Z","updated":"2018-12-02T11:45:57.915Z","comments":true,"path":"2018/12/02/git-squash/","link":"","permalink":"http://kjs850.github.io/2018/12/02/git-squash/","excerpt":"","text":"date: 2018-12-02 20:26:59 ì¤€ë¹„1234567891011121314151617181920212223242526272829 jake.ko î‚° ~/Dev î‚° cd git-study jake.ko î‚° ~/Dev/git-study î‚° ll jake.ko î‚° ~/Dev/git-study î‚° git initInitialized empty Git repository in /Users/jake.ko/Dev/git-study/.git/ jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° ll jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° ll -alrtotal 0drwxr-xr-x 10 jake.ko staff 320B 12 2 20:21 .gitdrwxr-xr-x 22 jake.ko staff 704B 12 2 20:16 ..drwxr-xr-x 3 jake.ko staff 96B 12 2 20:17 . jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° echo first &gt; first.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git add . jake.ko î‚° ~/Dev/git-study î‚° î‚  master âœš î‚° git commit -m \"A\"[master (root-commit) 20611a0] A 1 file changed, 1 insertion(+) create mode 100644 first.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° echo second &gt; second.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git add . jake.ko î‚° ~/Dev/git-study î‚° î‚  master âœš î‚° git commit -m \"B\"[master 381d030] B 1 file changed, 1 insertion(+) create mode 100644 second.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° echo third &gt; third.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git add . jake.ko î‚° ~/Dev/git-study î‚° î‚  master âœš î‚° git commit -m \"C\"[master 52bfd68] C 1 file changed, 1 insertion(+) create mode 100644 third.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git log1234567891011121314151617commit 52bfd68372367dcbb2b4c1c5bb1ddb1086f02119 (HEAD -&gt; master)Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:23:30 2018 +0900 Ccommit 381d030dafd61153bb3754c260b7216a9b5c47e9Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:22:52 2018 +0900 Bcommit 20611a043cea164d8d3e5f5d73b3949974a5fe50Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:22:19 2018 +0900 A git rebase -i HEAD~2123456789101112131415161718192021pick 381d030 Bpick 52bfd68 C# Rebase 20611a0..52bfd68 onto 20611a0 (2 commands)## Commands:# p, pick = use commit# r, reword = use commit, but edit the commit message# e, edit = use commit, but stop for amending# s, squash = use commit, but meld into previous commit# f, fixup = like \"squash\", but discard this commit's log message# x, exec = run command (the rest of the line) using shell# d, drop = remove commit## These lines can be re-ordered; they are executed from top to bottom.## If you remove a line here THAT COMMIT WILL BE LOST.## However, if you remove everything, the rebase will be aborted.## Note that empty commits are commented out ë°”ê¾¸ê³  ì €ì¥123pick 381d030 Bsquash 52bfd68 C ì•„ë˜ì™€ ê°™ì€ ìˆ˜ì •ì´ ê°€ëŠ¥ , ë””í´íŠ¸ ê·¸ëŒ€ë¡œ ì €ì¥ (.git/COMMIT_EDITMSG)12345678910111213141516171819202122232425# This is a combination of 2 commits.# This is the 1st commit message:B# This is the commit message #2:C# Please enter the commit message for your changes. Lines starting# with '#' will be ignored, and an empty message aborts the commit.## Date: Sun Dec 2 20:22:52 2018 +0900## interactive rebase in progress; onto 20611a0# Last commands done (2 commands done):# pick 381d030 B# squash 52bfd68 C# No commands remaining.# You are currently rebasing branch 'master' on '20611a0'.## Changes to be committed:# new file: second.txt# new file: third.txt# ê²°ê³¼1234567jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git rebase -i HEAD~2[detached HEAD 6899e57] B Date: Sun Dec 2 20:22:52 2018 +0900 2 files changed, 2 insertions(+) create mode 100644 second.txt create mode 100644 third.txtSuccessfully rebased and updated refs/heads/master git log123456789101112131415'git help -a' and 'git help -g' list available subcommands and somecommit 6899e57839eb085a8f0188572aec93ab1b8db74b (HEAD -&gt; master)Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:22:52 2018 +0900 B Ccommit 20611a043cea164d8d3e5f5d73b3949974a5fe50Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:22:19 2018 +0900 A(END) tags: [git]","categories":[],"tags":[]},{"title":"Kafka Consumer offset reset - java code","slug":"Kafka-Consumer-offset-reset-java-code","date":"2018-11-28T09:21:53.081Z","updated":"2018-11-28T09:21:53.081Z","comments":true,"path":"2018/11/28/Kafka-Consumer-offset-reset-java-code/","link":"","permalink":"http://kjs850.github.io/2018/11/28/Kafka-Consumer-offset-reset-java-code/","excerpt":"","text":"date: 2018-11-28 18:09:53 javaë¡œ íŠ¹ì • ì‹œê°„ì˜ offset ë¶€í„° ê°€ì ¸ì˜¤ê¸°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263package com.example.kafkaoffsettest;import org.apache.kafka.clients.consumer.ConsumerRecord;import org.apache.kafka.clients.consumer.ConsumerRecords;import org.apache.kafka.clients.consumer.KafkaConsumer;import org.apache.kafka.clients.consumer.OffsetAndTimestamp;import org.apache.kafka.common.TopicPartition;import org.joda.time.DateTime;import java.time.Instant;import java.util.*;import static com.example.kafkaoffsettest.KafkaConsumerUtil.TOPIC;import static com.example.kafkaoffsettest.KafkaConsumerUtil.createConsumer;import static java.time.temporal.ChronoUnit.DAYS;import static java.time.temporal.ChronoUnit.MINUTES;public class KafkaConsumerFromTime &#123; public static void main(String[] args) &#123; KafkaConsumer&lt;String, String&gt; consumer = createConsumer(); consumer.subscribe(Arrays.asList(TOPIC)); boolean flag = true; while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); if (flag) &#123; Set&lt;TopicPartition&gt; assignments = consumer.assignment(); Map&lt;TopicPartition, Long&gt; query = new HashMap&lt;&gt;(); for (TopicPartition topicPartition : assignments) &#123; query.put( topicPartition, Instant.now().minus(1, DAYS).toEpochMilli()); &#125; Map&lt;TopicPartition, OffsetAndTimestamp&gt; result = consumer.offsetsForTimes(query); result.entrySet() .stream() .forEach(entry -&gt; consumer.seek( entry.getKey(), Optional.ofNullable(entry.getValue()) .map(OffsetAndTimestamp::offset) .orElse(new Long(0)))); flag = false; &#125; for (ConsumerRecord&lt;String, String&gt; record : records) &#123; long timestamp = record.timestamp(); DateTime dateTime = new DateTime(timestamp); System.out.printf(\"dateTime = %s, offset = %d, key = %s, value = %s%n\", dateTime, record.offset(), record.key(), record.value()); &#125; &#125; &#125;&#125; ê²°ê³¼1234567&gt; date Wed Nov 28 18:20:25 KST 2018//ì‹¤í–‰ê²°ê³¼dateTime = 2018-11-28T17:43:58.201+09:00, offset = 26, key = null, value = foo1dateTime = 2018-11-28T17:43:58.208+09:00, offset = 27, key = null, value = foo2dateTime = 2018-11-28T17:43:58.208+09:00, offset = 28, key = null, value = foo3 tags: [kafka, offset, java]","categories":[],"tags":[]},{"title":"Kafka Consumer offset reset í•˜ê¸°","slug":"Kafka-Consumer-offset-reset-í•˜ê¸°","date":"2018-11-25T14:56:30.189Z","updated":"2018-11-25T14:56:30.190Z","comments":true,"path":"2018/11/25/Kafka-Consumer-offset-reset-í•˜ê¸°/","link":"","permalink":"http://kjs850.github.io/2018/11/25/Kafka-Consumer-offset-reset-í•˜ê¸°/","excerpt":"","text":"date: 2018-11-22 16:25:22 ê·¸ë£¹ ì§€ì •í•˜ì—¬ í† í”½ ìˆ˜ì‹ 123456789101112 âœ˜ jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-consumer --bootstrap-server localhost:9092 --topic test --group testGroup --from-beginningaaabbbccc``` ## ì»¨ìŠˆë¨¸ ê·¸ë£¹ë³„ offset ìƒíƒœ í™•ì¸```bashâœ˜ jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --describeTOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-IDtest 0 3 3 0 consumer-1-39ea110a-7f65-4ec3-8a9d-22c82d8be469 /172.26.113.148 consumer-1 TOPIC: í† í”½ ì´ë¦„ PARTITION: consumer group ë‚´ì˜ ê° consumerê°€ í• ë‹¹ëœ íŒŒí‹°ì…˜ ë²ˆí˜¸ CURRENT-OFFSET: í˜„ì¬ consumer groupì˜ consumerê°€ ê° íŒŒí‹°ì…˜ì—ì„œ ë§ˆì§€ë§‰ìœ¼ë¡œ offsetì„ commití•œ ê°’ LOG-END-OFFSET: producerìª½ì—ì„œ ë§ˆì§€ë§‰ìœ¼ë¡œ ìƒì„±í•œ ë ˆì½”ë“œì˜ offset LAG: LOG-END-OFFSETì—ì„œ CURRENT-OFFSETë¥¼ ëº€ ê°’. ì»¨ìŠˆë¨¸ ê·¸ë£¹ì˜ offset reset1kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --topic test --reset-offsets --to-earliest --execute â€“topic ëŒ€ì‹  â€“all-topicsë¥¼ ì§€ì •í•˜ë©´ ëª¨ë“  í† í”½ì— ëŒ€í•´ì„œ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤. â€“execute ì˜µì…˜ì„ ì œê±°í•˜ê³ , â€“dry-runì˜µì…˜ìœ¼ë¡œ ì‹¤í–‰í•˜ë©´ ì‹¤ì œ ë°˜ì˜ë˜ì§€ ì•Šê³  ì–´ë–»ê²Œ ë³€í• ì§€ ê²°ê³¼ë§Œ ì¶œë ¥í•˜ëŠ” dry runì´ ê°€ëŠ¥í•˜ë‹¤. 1234 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --topic test --reset-offsets --to-earliest --dry-runTOPIC PARTITION NEW-OFFSETtest 0 0 ì£¼ì˜ì‚¬í•­: í•´ë‹¹ ê·¸ë£¹ì˜ ì»¨ìŠˆë¨¸ë¥¼ ë©ˆì¶”ê³  ë¦¬ì…‹í•´ì•¼ í•œë‹¤.(consumer groupì´ ì‹¤í–‰ì¤‘ì¸ ìƒíƒœì— offset resetì„ ì§„í–‰í•˜ëŠ” ê²½ìš° resetì€ ì‹¤íŒ¨í•œë‹¤.) 12345 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --topic test --reset-offsets --to-earliest --dry-runError: Assignments can only be reset if the group 'testGroup' is inactive, but the current state is Stable.TOPIC PARTITION NEW-OFFSET jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° ìƒ˜í”Œê¸°ì¡´ì˜ í”„ë¡œë“€ì„œê°€ ì§€ì†ì ìœ¼ë¡œ ë©”ì‹œì§€ ìƒì‚°1234567jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-producer --broker-list localhost:9092 --topic test&gt;aaa&gt;bbb&gt;ccc&gt;ddd&gt;eee&gt; ì¤‘ê°„ë¶€í„° ì»¨ìŠ˜123âœ˜ jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-consumer --bootstrap-server localhost:9092 --topic test --group testGroupdddeee ë¦¬ì…‹ í›„ ì²˜ìŒë¶€í„° ì»¨ìŠ˜í•˜ë„ë¡ ë³€ê²½12345jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --topic test --reset-offsets --to-earliest --executeTOPIC PARTITION NEW-OFFSETtest 0 0 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° ì»¨ìŠ˜ ì¬ê°œ í›„ ê²°ê³¼ (offset ë¦¬ì…‹ë˜ì–´, ì²˜ìŒë¶€í„° ì»¨ìŠ˜í•œë‹¤.)123456 âœ˜ jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-consumer --bootstrap-server localhost:9092 --topic test --group testGroupaaabbbcccdddeee ì˜¤í”„ì…‹ì˜ ìœ„ì¹˜ë¥¼ ì¬ì„¤ì •í•˜ê¸° ìœ„í•œ ì•„ë˜ì™€ê°™ì€ ìƒì„¸ ì˜µì…˜ë“¤ì´ ìˆë‹¤. â€“shift-by &lt;Long: number-of-offsets&gt; í˜•ì‹ (+/- ëª¨ë‘ ê°€ëŠ¥) â€“to-offset &lt;Long: offset&gt; â€“to-current â€“by-duration &lt;String: duration&gt; : í˜•ì‹ â€˜PnDTnHnMnSâ€™ â€“to-datetime &lt;String: datetime&gt; : í˜•ì‹ â€˜YYYY-MM-DDTHH:mm:SS.sssâ€™ â€“to-latest â€“to-earliest â€“to-datetimeì˜ ê²½ìš° kafkaì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì„œ ë‹¤ë¥¸ê³³ì— ì €ì¥í•˜ëŠ” ì¤‘ì— ë°ì´í„° ìœ ì‹¤ ë˜ëŠ” ì¤‘ë³µ write ë“±ì´ ë°œìƒí•œ ê²½ìš°ì— ë‚ ì§œ ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ì„œ ì¬ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ê²½ìš° ë§¤ìš° ìœ ìš©í•˜ë‹¤. CLIê°€ ì•„ë‹Œ Java ì½”ë“œë¡œ offset resetí•˜ê¸°Kafkaì˜ ê²½ìš° ì‚¬ìš© í˜•íƒœì— ë”°ë¼ Consumer APIì™€ Stream API ë‘ê°€ì§€ë¥¼ ì œê³µí•œë‹¤. Consumer API ê°œë³„ ì´ë²¤íŠ¸ ë‹¨ìœ„ì˜ low level ì²˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš° datetime, offset ì„ ì§€ì •í•´ì„œ ì›í•˜ëŠ” ëŒ€ë¡œ reset ê°€ëŠ¥ Stream API Stream processingì´ í•„ìš”í•œ ê²½ìš° offset reset ê¸°ëŠ¥ ì—†ìŒ (ìœ„ì—ì„œ ì–¸ê¸‰í•œ CLI toolì„ ì‚¬ìš©í•´ì•¼í•¨) Consumer APIë¥¼ ì‚¬ìš©í• ë•Œ Javaì½”ë“œ ë ˆë²¨ì—ì„œ programmaticalí•˜ê²Œ offsetì„ ë¦¬ì…‹í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.ë¨¼ì € KafkaConsumerê°€ ìƒì„±í•œ í›„ì—1KafkaConsumer&lt;Object, Object&gt; consumer = new KafkaConsumer&lt;&gt;(properties, keyDeser, valueDeser); consumer loopì— ì§„ì…í•˜ì—¬ consumer.poll()ì„ ë¶€ë¥´ê¸° ì „ì—, ìƒì„±ëœ consumer ê°ì²´ì— ëŒ€í•´ offsetì„ ë³€ê²½í•˜ëŠ” ë‹¤ìŒ í•¨ìˆ˜ë“¤ì„ í˜¸ì¶œí•˜ì—¬ offsetì„ ì›í•˜ëŠ” ëŒ€ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. seekToBeginning: earliestë¡œ reset seekToEnd: latestë¡œ reset seek : ì§€ì • offsetìœ¼ë¡œ reset offsetsForTimes: datetime ê¸°ì¤€ìœ¼ë¡œ reset reference https://www.letmecompile.com/kafka-consumer-offset-reset/ https://gist.github.com/marwei/cd40657c481f94ebe273ecc16601674b http://blog.sysco.no/integration/kafka-rewind-consumers-offset/ tags: kafka, offset","categories":[],"tags":[]},{"title":"kafka ì„¤ì¹˜ ë° êµ¬ë™","slug":"kafka-ì„¤ì¹˜-ë°-êµ¬ë™","date":"2018-11-22T07:28:12.775Z","updated":"2018-11-22T07:28:12.775Z","comments":true,"path":"2018/11/22/kafka-ì„¤ì¹˜-ë°-êµ¬ë™/","link":"","permalink":"http://kjs850.github.io/2018/11/22/kafka-ì„¤ì¹˜-ë°-êµ¬ë™/","excerpt":"","text":"date: 2018-11-22 14:35:57 ì„¤ì¹˜1234567891011121314151617181920&gt; brew install kafka..... ìƒëµ... brew services start kafkaOr, if you don't want/need a background service you can just run: zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties &amp; kafka-server-start /usr/local/etc/kafka/server.properties==&gt; SummaryğŸº /usr/local/Cellar/kafka/2.0.0: 160 files, 46.8MB==&gt; Caveats==&gt; zookeeperTo have launchd start zookeeper now and restart at login: brew services start zookeeperOr, if you don't want/need a background service you can just run: zkServer start==&gt; kafkaTo have launchd start kafka now and restart at login: brew services start kafkaOr, if you don't want/need a background service you can just run: zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties &amp; kafka-server-start /usr/local/etc/kafka/server.properties ì£¼í‚¤í¼ êµ¬ë™ 12345678jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties[2018-11-22 14:39:11,550] INFO Reading configuration from: /usr/local/etc/kafka/zookeeper.properties (org.apache.zookeeper.server.quorum.QuorumPeerConfig)[2018-11-22 14:39:11,553] INFO autopurge.snapRetainCount set to 3 (org.apache.zookeeper.server.DatadirCleanupManager)[2018-11-22 14:39:11,553] INFO autopurge.purgeInterval set to 0 (org.apache.zookeeper.server.DatadirCleanupManager)[2018-11-22 14:39:11,555] INFO Purge task is not scheduled. (org.apache.zookeeper.server.DatadirCleanupManager)[2018-11-22 14:39:11,555] WARN Either no config or no quorum defined in config, running in standalone mode (org.apache.zookeeper.server.quorum.QuorumPeerMain)[2018-11-22 14:39:11,571] INFO Reading configuration from: /usr/local/etc/kafka/zookeeper.properties (org.apache.zookeeper.server.quorum.QuorumPeerConfig)ìƒëµ... ì¹´í”„ì¹´ êµ¬ë™ 1234567891011jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-server-start /usr/local/etc/kafka/server.properties[2018-11-22 14:39:25,676] INFO Registered kafka:type=kafka.Log4jController MBean (kafka.utils.Log4jControllerRegistration$)[2018-11-22 14:39:26,191] INFO starting (kafka.server.KafkaServer)[2018-11-22 14:39:26,192] INFO Connecting to zookeeper on localhost:2181 (kafka.server.KafkaServer)[2018-11-22 14:39:26,208] INFO [ZooKeeperClient] Initializing a new session to localhost:2181. (kafka.zookeeper.ZooKeeperClient)[2018-11-22 14:39:26,215] INFO Client environment:zookeeper.version=3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03, built on 06/29/2018 00:39 GMT (org.apache.zookeeper.ZooKeeper)[2018-11-22 14:39:26,215] INFO Client environment:host.name=172.26.113.148 (org.apache.zookeeper.ZooKeeper)[2018-11-22 14:39:26,215] INFO Client environment:java.version=1.8.0_161 (org.apache.zookeeper.ZooKeeper)[2018-11-22 14:39:26,215] INFO Client environment:java.vendor=Oracle Corporation (org.apache.zookeeper.ZooKeeper)[2018-11-22 14:39:26,215] INFO Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_161.jdk/Contents/Home/jre (org.apache.zookeeper.ZooKeeper)ìƒëµ... í† í”½ ìƒì„±12jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic testCreated topic \"test\". í† í”½ ë³´ë‚´ê¸°(produce)12345 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-producer --broker-list localhost:9092 --topic test&gt;aaa&gt;bbb&gt;ccc&gt; í† í”½ ìˆ˜ì‹ (consume)1234 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-consumer --bootstrap-server localhost:9092 --topic test --from-beginningaaabbbccc reference https://medium.com/@Ankitthakur/apache-kafka-installation-on-mac-using-homebrew-a367cdefd273 tags: kafka, mac, install","categories":[],"tags":[]},{"title":"kafka streamsëŠ” ë¬´ì—‡ì¸ê°€?","slug":"kafka-streamsëŠ”-ë¬´ì—‡ì¸ê°€","date":"2018-11-22T04:19:54.220Z","updated":"2018-11-22T04:19:54.220Z","comments":true,"path":"2018/11/22/kafka-streamsëŠ”-ë¬´ì—‡ì¸ê°€/","link":"","permalink":"http://kjs850.github.io/2018/11/22/kafka-streamsëŠ”-ë¬´ì—‡ì¸ê°€/","excerpt":"","text":"date: 2018-11-22 10:48:50 ì†Œê°œ ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆëŠ” ì¹´í”„ì¹´ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  ë¶„ì„í•˜ê¸° ìœ„í•´ ê°œë°œëœ í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤. ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆëŠ” ì´ë²¤íŠ¸ ì²˜ë¦¬ ì‹œê°„ê³¼ ì²˜ë¦¬ ì‹œê°„ì„ ë¶„ë¦¬í•´ì„œ ë‹¤ë£¨ê³  ë‹¤ì–‘í•œ ì‹œê°„ ê°„ê²© ì˜µì…˜ì„ ì§€ì›í•˜ê¸°ì— ì‹¤ì‹œê°„ ë¶„ì„ì„ ê°„ë‹¨í•˜ë©´ì„œë„ íš¨ìœ¨ì ìœ¼ë¡œ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. íŠ¹ì§• ê°„ë‹¨í•˜ê³  ê°€ë²¼ìš´ í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê¸° ë•Œë¬¸ì— ê¸°ì¡´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í• ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œì´ë‚˜ ì¹´í”„ì¹´ì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ì—†ìŠµë‹ˆë‹¤. ì´ì¤‘í™”ëœ ë¡œì»¬ ìƒíƒœ ì €ì¥ì†Œë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ì¹´í”„ì¹´ ë¸Œë¡œì»¤ë‚˜ í´ë¼ì´ì–¸íŠ¸ì— ì¥ì• ê°€ ìƒê¸°ë”ë¼ë„ ìŠ¤íŠ¸ë¦¼ì— ëŒ€í•´ì„œ 1ë²ˆë§Œ ì²˜ë¦¬ê°€ ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë°€ë¦¬ì´ˆ ë‹¨ìœ„ì˜ ì²˜ë¦¬ ì§€ì—°ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ í•œë²ˆì— í•œ ë ˆì½”ë“œë§Œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ê³ ìˆ˜ì¤€ì˜ ìŠ¤íŠ¸ë¦¼ DSL(Domain Specific Language)ì„ ì§€ì›í•˜ê³ , ì €ìˆ˜ì¤€ì˜ í”„ë¡œì„¸ì‹± APIë„ ì œê³µí•©ë‹ˆë‹¤. ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸° ì˜ˆì œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package test.kafka; import org.apache.kafka.common.serialization.Serdes;import org.apache.kafka.streams.KafkaStreams;import org.apache.kafka.streams.StreamsBuilder;import org.apache.kafka.streams.StreamsConfig;import org.apache.kafka.streams.Topology; import java.util.Properties;import java.util.concurrent.CountDownLatch; public class Pipe &#123; public static void main(String[] args) throws Exception &#123; Properties props = new Properties(); props.put(StreamsConfig.APPLICATION_ID_CONFIG, \"jake-streams-pipe\"); props.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, \"localhost:9092\"); props.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass()); props.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass()); final StreamsBuilder builder = new StreamsBuilder(); builder.stream(\"jake-stream-in\").to(\"jake-stream-out\"); final Topology topology = builder.build(); System.out.println(topology.describe()); final KafkaStreams streams = new KafkaStreams(topology, props); final CountDownLatch latch = new CountDownLatch(1); // attach shutdown handler to catch control-c Runtime.getRuntime().addShutdownHook(new Thread(\"streams-shutdown-hook\") &#123; @Override public void run() &#123; streams.close(); latch.countDown(); &#125; &#125;); try &#123; streams.start(); latch.await(); &#125; catch (Throwable e) &#123; System.exit(1); &#125; System.exit(0); &#125; &#125; ì¶œë ¥ ê²°ê³¼ì•„ë˜ì™€ ê°™ì€ í† í´ë¡œì§€ê°€ ë§Œë“¤ì–´ì§„ë‹¤. í•˜ë‚˜ì˜ í† í”½ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•œ í† í”½ì´ ìƒê²¼ë‹¤. ( jake-stream-in ì˜ í† í”½ë‚´ì˜ ë©”ì‹œì§€ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³µì‚¬í•˜ëŠ” jake-stream-out í† í”½ì´ ìƒê²¼ë‹¤) ì‘ìš©jake-stream-outì´ë€ í† í”½ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶„ì„í•œ ê²°ê³¼ë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤. (ex. ë‹¨ì–´ split , ë˜ëŠ” ë‹¨ì–´ ë¹ˆë„ ì„¸ê¸°) ì°¸ê³  ì¹´í”„ì¹´ console-producer console-consumerëŠ” ê·¸ëƒ¥ ì½˜ì†”ë¡œ ë©”ì‹œì§€ ìƒì„±, ì†Œë¹„í•œë‹¤. ì¹´í”„ì¹´ ì„¤ì¹˜ íŒŒì¼ì˜ binì— ìœ„ì¹˜í•´ ìˆìŒ. (http://kafka.apache.org/downloads.html)","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2018-11-21T08:01:00.716Z","updated":"2018-11-21T08:01:00.716Z","comments":true,"path":"2018/11/21/hello-world/","link":"","permalink":"http://kjs850.github.io/2018/11/21/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Starthttps://hyunseob.github.io/2016/02/23/start-hexo/ Create a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}