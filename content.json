{"meta":{"title":"SeoWonğŸ’•, SeoHunğŸ’•, EunAğŸ’•","subtitle":null,"description":null,"author":"ê³ ì¬ì„±","url":"http://kjs850.github.io"},"pages":[],"posts":[{"title":"git squash","slug":"git-squash","date":"2018-12-02T11:45:57.915Z","updated":"2018-12-02T11:45:57.915Z","comments":true,"path":"2018/12/02/git-squash/","link":"","permalink":"http://kjs850.github.io/2018/12/02/git-squash/","excerpt":"","text":"date: 2018-12-02 20:26:59 ì¤€ë¹„1234567891011121314151617181920212223242526272829 jake.ko î‚° ~/Dev î‚° cd git-study jake.ko î‚° ~/Dev/git-study î‚° ll jake.ko î‚° ~/Dev/git-study î‚° git initInitialized empty Git repository in /Users/jake.ko/Dev/git-study/.git/ jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° ll jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° ll -alrtotal 0drwxr-xr-x 10 jake.ko staff 320B 12 2 20:21 .gitdrwxr-xr-x 22 jake.ko staff 704B 12 2 20:16 ..drwxr-xr-x 3 jake.ko staff 96B 12 2 20:17 . jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° echo first &gt; first.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git add . jake.ko î‚° ~/Dev/git-study î‚° î‚  master âœš î‚° git commit -m \"A\"[master (root-commit) 20611a0] A 1 file changed, 1 insertion(+) create mode 100644 first.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° echo second &gt; second.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git add . jake.ko î‚° ~/Dev/git-study î‚° î‚  master âœš î‚° git commit -m \"B\"[master 381d030] B 1 file changed, 1 insertion(+) create mode 100644 second.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° echo third &gt; third.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git add . jake.ko î‚° ~/Dev/git-study î‚° î‚  master âœš î‚° git commit -m \"C\"[master 52bfd68] C 1 file changed, 1 insertion(+) create mode 100644 third.txt jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git log1234567891011121314151617commit 52bfd68372367dcbb2b4c1c5bb1ddb1086f02119 (HEAD -&gt; master)Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:23:30 2018 +0900 Ccommit 381d030dafd61153bb3754c260b7216a9b5c47e9Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:22:52 2018 +0900 Bcommit 20611a043cea164d8d3e5f5d73b3949974a5fe50Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:22:19 2018 +0900 A git rebase -i HEAD~2123456789101112131415161718192021pick 381d030 Bpick 52bfd68 C# Rebase 20611a0..52bfd68 onto 20611a0 (2 commands)## Commands:# p, pick = use commit# r, reword = use commit, but edit the commit message# e, edit = use commit, but stop for amending# s, squash = use commit, but meld into previous commit# f, fixup = like \"squash\", but discard this commit's log message# x, exec = run command (the rest of the line) using shell# d, drop = remove commit## These lines can be re-ordered; they are executed from top to bottom.## If you remove a line here THAT COMMIT WILL BE LOST.## However, if you remove everything, the rebase will be aborted.## Note that empty commits are commented out ë°”ê¾¸ê³  ì €ì¥123pick 381d030 Bsquash 52bfd68 C ì•„ë˜ì™€ ê°™ì€ ìˆ˜ì •ì´ ê°€ëŠ¥ , ë””í´íŠ¸ ê·¸ëŒ€ë¡œ ì €ì¥ (.git/COMMIT_EDITMSG)12345678910111213141516171819202122232425# This is a combination of 2 commits.# This is the 1st commit message:B# This is the commit message #2:C# Please enter the commit message for your changes. Lines starting# with '#' will be ignored, and an empty message aborts the commit.## Date: Sun Dec 2 20:22:52 2018 +0900## interactive rebase in progress; onto 20611a0# Last commands done (2 commands done):# pick 381d030 B# squash 52bfd68 C# No commands remaining.# You are currently rebasing branch 'master' on '20611a0'.## Changes to be committed:# new file: second.txt# new file: third.txt# ê²°ê³¼1234567jake.ko î‚° ~/Dev/git-study î‚° î‚  master î‚° git rebase -i HEAD~2[detached HEAD 6899e57] B Date: Sun Dec 2 20:22:52 2018 +0900 2 files changed, 2 insertions(+) create mode 100644 second.txt create mode 100644 third.txtSuccessfully rebased and updated refs/heads/master git log123456789101112131415'git help -a' and 'git help -g' list available subcommands and somecommit 6899e57839eb085a8f0188572aec93ab1b8db74b (HEAD -&gt; master)Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:22:52 2018 +0900 B Ccommit 20611a043cea164d8d3e5f5d73b3949974a5fe50Author: jake.ko &lt;jake.ko@kakaocorp.com&gt;Date: Sun Dec 2 20:22:19 2018 +0900 A(END) tags: [git]","categories":[],"tags":[]},{"title":"Kafka Consumer offset reset - java code","slug":"Kafka-Consumer-offset-reset-java-code","date":"2018-11-28T09:21:53.081Z","updated":"2018-11-28T09:21:53.081Z","comments":true,"path":"2018/11/28/Kafka-Consumer-offset-reset-java-code/","link":"","permalink":"http://kjs850.github.io/2018/11/28/Kafka-Consumer-offset-reset-java-code/","excerpt":"","text":"date: 2018-11-28 18:09:53 javaë¡œ íŠ¹ì • ì‹œê°„ì˜ offset ë¶€í„° ê°€ì ¸ì˜¤ê¸°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263package com.example.kafkaoffsettest;import org.apache.kafka.clients.consumer.ConsumerRecord;import org.apache.kafka.clients.consumer.ConsumerRecords;import org.apache.kafka.clients.consumer.KafkaConsumer;import org.apache.kafka.clients.consumer.OffsetAndTimestamp;import org.apache.kafka.common.TopicPartition;import org.joda.time.DateTime;import java.time.Instant;import java.util.*;import static com.example.kafkaoffsettest.KafkaConsumerUtil.TOPIC;import static com.example.kafkaoffsettest.KafkaConsumerUtil.createConsumer;import static java.time.temporal.ChronoUnit.DAYS;import static java.time.temporal.ChronoUnit.MINUTES;public class KafkaConsumerFromTime &#123; public static void main(String[] args) &#123; KafkaConsumer&lt;String, String&gt; consumer = createConsumer(); consumer.subscribe(Arrays.asList(TOPIC)); boolean flag = true; while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); if (flag) &#123; Set&lt;TopicPartition&gt; assignments = consumer.assignment(); Map&lt;TopicPartition, Long&gt; query = new HashMap&lt;&gt;(); for (TopicPartition topicPartition : assignments) &#123; query.put( topicPartition, Instant.now().minus(1, DAYS).toEpochMilli()); &#125; Map&lt;TopicPartition, OffsetAndTimestamp&gt; result = consumer.offsetsForTimes(query); result.entrySet() .stream() .forEach(entry -&gt; consumer.seek( entry.getKey(), Optional.ofNullable(entry.getValue()) .map(OffsetAndTimestamp::offset) .orElse(new Long(0)))); flag = false; &#125; for (ConsumerRecord&lt;String, String&gt; record : records) &#123; long timestamp = record.timestamp(); DateTime dateTime = new DateTime(timestamp); System.out.printf(\"dateTime = %s, offset = %d, key = %s, value = %s%n\", dateTime, record.offset(), record.key(), record.value()); &#125; &#125; &#125;&#125; ê²°ê³¼1234567&gt; date Wed Nov 28 18:20:25 KST 2018//ì‹¤í–‰ê²°ê³¼dateTime = 2018-11-28T17:43:58.201+09:00, offset = 26, key = null, value = foo1dateTime = 2018-11-28T17:43:58.208+09:00, offset = 27, key = null, value = foo2dateTime = 2018-11-28T17:43:58.208+09:00, offset = 28, key = null, value = foo3 tags: [kafka, offset, java]","categories":[],"tags":[]},{"title":"Kafka Consumer offset reset í•˜ê¸°","slug":"Kafka-Consumer-offset-reset-í•˜ê¸°","date":"2018-11-25T14:56:30.189Z","updated":"2018-11-25T14:56:30.190Z","comments":true,"path":"2018/11/25/Kafka-Consumer-offset-reset-í•˜ê¸°/","link":"","permalink":"http://kjs850.github.io/2018/11/25/Kafka-Consumer-offset-reset-í•˜ê¸°/","excerpt":"","text":"date: 2018-11-22 16:25:22 ê·¸ë£¹ ì§€ì •í•˜ì—¬ í† í”½ ìˆ˜ì‹ 123456789101112 âœ˜ jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-consumer --bootstrap-server localhost:9092 --topic test --group testGroup --from-beginningaaabbbccc``` ## ì»¨ìŠˆë¨¸ ê·¸ë£¹ë³„ offset ìƒíƒœ í™•ì¸```bashâœ˜ jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --describeTOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-IDtest 0 3 3 0 consumer-1-39ea110a-7f65-4ec3-8a9d-22c82d8be469 /172.26.113.148 consumer-1 TOPIC: í† í”½ ì´ë¦„ PARTITION: consumer group ë‚´ì˜ ê° consumerê°€ í• ë‹¹ëœ íŒŒí‹°ì…˜ ë²ˆí˜¸ CURRENT-OFFSET: í˜„ì¬ consumer groupì˜ consumerê°€ ê° íŒŒí‹°ì…˜ì—ì„œ ë§ˆì§€ë§‰ìœ¼ë¡œ offsetì„ commití•œ ê°’ LOG-END-OFFSET: producerìª½ì—ì„œ ë§ˆì§€ë§‰ìœ¼ë¡œ ìƒì„±í•œ ë ˆì½”ë“œì˜ offset LAG: LOG-END-OFFSETì—ì„œ CURRENT-OFFSETë¥¼ ëº€ ê°’. ì»¨ìŠˆë¨¸ ê·¸ë£¹ì˜ offset reset1kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --topic test --reset-offsets --to-earliest --execute â€“topic ëŒ€ì‹  â€“all-topicsë¥¼ ì§€ì •í•˜ë©´ ëª¨ë“  í† í”½ì— ëŒ€í•´ì„œ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤. â€“execute ì˜µì…˜ì„ ì œê±°í•˜ê³ , â€“dry-runì˜µì…˜ìœ¼ë¡œ ì‹¤í–‰í•˜ë©´ ì‹¤ì œ ë°˜ì˜ë˜ì§€ ì•Šê³  ì–´ë–»ê²Œ ë³€í• ì§€ ê²°ê³¼ë§Œ ì¶œë ¥í•˜ëŠ” dry runì´ ê°€ëŠ¥í•˜ë‹¤. 1234 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --topic test --reset-offsets --to-earliest --dry-runTOPIC PARTITION NEW-OFFSETtest 0 0 ì£¼ì˜ì‚¬í•­: í•´ë‹¹ ê·¸ë£¹ì˜ ì»¨ìŠˆë¨¸ë¥¼ ë©ˆì¶”ê³  ë¦¬ì…‹í•´ì•¼ í•œë‹¤.(consumer groupì´ ì‹¤í–‰ì¤‘ì¸ ìƒíƒœì— offset resetì„ ì§„í–‰í•˜ëŠ” ê²½ìš° resetì€ ì‹¤íŒ¨í•œë‹¤.) 12345 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --topic test --reset-offsets --to-earliest --dry-runError: Assignments can only be reset if the group 'testGroup' is inactive, but the current state is Stable.TOPIC PARTITION NEW-OFFSET jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° ìƒ˜í”Œê¸°ì¡´ì˜ í”„ë¡œë“€ì„œê°€ ì§€ì†ì ìœ¼ë¡œ ë©”ì‹œì§€ ìƒì‚°1234567jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-producer --broker-list localhost:9092 --topic test&gt;aaa&gt;bbb&gt;ccc&gt;ddd&gt;eee&gt; ì¤‘ê°„ë¶€í„° ì»¨ìŠ˜123âœ˜ jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-consumer --bootstrap-server localhost:9092 --topic test --group testGroupdddeee ë¦¬ì…‹ í›„ ì²˜ìŒë¶€í„° ì»¨ìŠ˜í•˜ë„ë¡ ë³€ê²½12345jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-consumer-groups --bootstrap-server localhost:9092 --group testGroup --topic test --reset-offsets --to-earliest --executeTOPIC PARTITION NEW-OFFSETtest 0 0 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° ì»¨ìŠ˜ ì¬ê°œ í›„ ê²°ê³¼ (offset ë¦¬ì…‹ë˜ì–´, ì²˜ìŒë¶€í„° ì»¨ìŠ˜í•œë‹¤.)123456 âœ˜ jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-consumer --bootstrap-server localhost:9092 --topic test --group testGroupaaabbbcccdddeee ì˜¤í”„ì…‹ì˜ ìœ„ì¹˜ë¥¼ ì¬ì„¤ì •í•˜ê¸° ìœ„í•œ ì•„ë˜ì™€ê°™ì€ ìƒì„¸ ì˜µì…˜ë“¤ì´ ìˆë‹¤. â€“shift-by &lt;Long: number-of-offsets&gt; í˜•ì‹ (+/- ëª¨ë‘ ê°€ëŠ¥) â€“to-offset &lt;Long: offset&gt; â€“to-current â€“by-duration &lt;String: duration&gt; : í˜•ì‹ â€˜PnDTnHnMnSâ€™ â€“to-datetime &lt;String: datetime&gt; : í˜•ì‹ â€˜YYYY-MM-DDTHH:mm:SS.sssâ€™ â€“to-latest â€“to-earliest â€“to-datetimeì˜ ê²½ìš° kafkaì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì„œ ë‹¤ë¥¸ê³³ì— ì €ì¥í•˜ëŠ” ì¤‘ì— ë°ì´í„° ìœ ì‹¤ ë˜ëŠ” ì¤‘ë³µ write ë“±ì´ ë°œìƒí•œ ê²½ìš°ì— ë‚ ì§œ ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ì„œ ì¬ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ê²½ìš° ë§¤ìš° ìœ ìš©í•˜ë‹¤. CLIê°€ ì•„ë‹Œ Java ì½”ë“œë¡œ offset resetí•˜ê¸°Kafkaì˜ ê²½ìš° ì‚¬ìš© í˜•íƒœì— ë”°ë¼ Consumer APIì™€ Stream API ë‘ê°€ì§€ë¥¼ ì œê³µí•œë‹¤. Consumer API ê°œë³„ ì´ë²¤íŠ¸ ë‹¨ìœ„ì˜ low level ì²˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš° datetime, offset ì„ ì§€ì •í•´ì„œ ì›í•˜ëŠ” ëŒ€ë¡œ reset ê°€ëŠ¥ Stream API Stream processingì´ í•„ìš”í•œ ê²½ìš° offset reset ê¸°ëŠ¥ ì—†ìŒ (ìœ„ì—ì„œ ì–¸ê¸‰í•œ CLI toolì„ ì‚¬ìš©í•´ì•¼í•¨) Consumer APIë¥¼ ì‚¬ìš©í• ë•Œ Javaì½”ë“œ ë ˆë²¨ì—ì„œ programmaticalí•˜ê²Œ offsetì„ ë¦¬ì…‹í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.ë¨¼ì € KafkaConsumerê°€ ìƒì„±í•œ í›„ì—1KafkaConsumer&lt;Object, Object&gt; consumer = new KafkaConsumer&lt;&gt;(properties, keyDeser, valueDeser); consumer loopì— ì§„ì…í•˜ì—¬ consumer.poll()ì„ ë¶€ë¥´ê¸° ì „ì—, ìƒì„±ëœ consumer ê°ì²´ì— ëŒ€í•´ offsetì„ ë³€ê²½í•˜ëŠ” ë‹¤ìŒ í•¨ìˆ˜ë“¤ì„ í˜¸ì¶œí•˜ì—¬ offsetì„ ì›í•˜ëŠ” ëŒ€ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. seekToBeginning: earliestë¡œ reset seekToEnd: latestë¡œ reset seek : ì§€ì • offsetìœ¼ë¡œ reset offsetsForTimes: datetime ê¸°ì¤€ìœ¼ë¡œ reset reference https://www.letmecompile.com/kafka-consumer-offset-reset/ https://gist.github.com/marwei/cd40657c481f94ebe273ecc16601674b http://blog.sysco.no/integration/kafka-rewind-consumers-offset/ tags: kafka, offset","categories":[],"tags":[]},{"title":"kafka ì„¤ì¹˜ ë° êµ¬ë™","slug":"kafka-ì„¤ì¹˜-ë°-êµ¬ë™","date":"2018-11-22T07:28:12.775Z","updated":"2018-11-22T07:28:12.775Z","comments":true,"path":"2018/11/22/kafka-ì„¤ì¹˜-ë°-êµ¬ë™/","link":"","permalink":"http://kjs850.github.io/2018/11/22/kafka-ì„¤ì¹˜-ë°-êµ¬ë™/","excerpt":"","text":"date: 2018-11-22 14:35:57 ì„¤ì¹˜1234567891011121314151617181920&gt; brew install kafka..... ìƒëµ... brew services start kafkaOr, if you don't want/need a background service you can just run: zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties &amp; kafka-server-start /usr/local/etc/kafka/server.properties==&gt; SummaryğŸº /usr/local/Cellar/kafka/2.0.0: 160 files, 46.8MB==&gt; Caveats==&gt; zookeeperTo have launchd start zookeeper now and restart at login: brew services start zookeeperOr, if you don't want/need a background service you can just run: zkServer start==&gt; kafkaTo have launchd start kafka now and restart at login: brew services start kafkaOr, if you don't want/need a background service you can just run: zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties &amp; kafka-server-start /usr/local/etc/kafka/server.properties ì£¼í‚¤í¼ êµ¬ë™ 12345678jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties[2018-11-22 14:39:11,550] INFO Reading configuration from: /usr/local/etc/kafka/zookeeper.properties (org.apache.zookeeper.server.quorum.QuorumPeerConfig)[2018-11-22 14:39:11,553] INFO autopurge.snapRetainCount set to 3 (org.apache.zookeeper.server.DatadirCleanupManager)[2018-11-22 14:39:11,553] INFO autopurge.purgeInterval set to 0 (org.apache.zookeeper.server.DatadirCleanupManager)[2018-11-22 14:39:11,555] INFO Purge task is not scheduled. (org.apache.zookeeper.server.DatadirCleanupManager)[2018-11-22 14:39:11,555] WARN Either no config or no quorum defined in config, running in standalone mode (org.apache.zookeeper.server.quorum.QuorumPeerMain)[2018-11-22 14:39:11,571] INFO Reading configuration from: /usr/local/etc/kafka/zookeeper.properties (org.apache.zookeeper.server.quorum.QuorumPeerConfig)ìƒëµ... ì¹´í”„ì¹´ êµ¬ë™ 1234567891011jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-server-start /usr/local/etc/kafka/server.properties[2018-11-22 14:39:25,676] INFO Registered kafka:type=kafka.Log4jController MBean (kafka.utils.Log4jControllerRegistration$)[2018-11-22 14:39:26,191] INFO starting (kafka.server.KafkaServer)[2018-11-22 14:39:26,192] INFO Connecting to zookeeper on localhost:2181 (kafka.server.KafkaServer)[2018-11-22 14:39:26,208] INFO [ZooKeeperClient] Initializing a new session to localhost:2181. (kafka.zookeeper.ZooKeeperClient)[2018-11-22 14:39:26,215] INFO Client environment:zookeeper.version=3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03, built on 06/29/2018 00:39 GMT (org.apache.zookeeper.ZooKeeper)[2018-11-22 14:39:26,215] INFO Client environment:host.name=172.26.113.148 (org.apache.zookeeper.ZooKeeper)[2018-11-22 14:39:26,215] INFO Client environment:java.version=1.8.0_161 (org.apache.zookeeper.ZooKeeper)[2018-11-22 14:39:26,215] INFO Client environment:java.vendor=Oracle Corporation (org.apache.zookeeper.ZooKeeper)[2018-11-22 14:39:26,215] INFO Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_161.jdk/Contents/Home/jre (org.apache.zookeeper.ZooKeeper)ìƒëµ... í† í”½ ìƒì„±12jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic testCreated topic \"test\". í† í”½ ë³´ë‚´ê¸°(produce)12345 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-producer --broker-list localhost:9092 --topic test&gt;aaa&gt;bbb&gt;ccc&gt; í† í”½ ìˆ˜ì‹ (consume)1234 jake.ko@jakekoui-MacBook-Pro î‚° ~ î‚° kafka-console-consumer --bootstrap-server localhost:9092 --topic test --from-beginningaaabbbccc reference https://medium.com/@Ankitthakur/apache-kafka-installation-on-mac-using-homebrew-a367cdefd273 tags: kafka, mac, install","categories":[],"tags":[]},{"title":"kafka streamsëŠ” ë¬´ì—‡ì¸ê°€?","slug":"kafka-streamsëŠ”-ë¬´ì—‡ì¸ê°€","date":"2018-11-22T04:19:54.220Z","updated":"2018-11-22T04:19:54.220Z","comments":true,"path":"2018/11/22/kafka-streamsëŠ”-ë¬´ì—‡ì¸ê°€/","link":"","permalink":"http://kjs850.github.io/2018/11/22/kafka-streamsëŠ”-ë¬´ì—‡ì¸ê°€/","excerpt":"","text":"date: 2018-11-22 10:48:50 ì†Œê°œ ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆëŠ” ì¹´í”„ì¹´ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  ë¶„ì„í•˜ê¸° ìœ„í•´ ê°œë°œëœ í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤. ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆëŠ” ì´ë²¤íŠ¸ ì²˜ë¦¬ ì‹œê°„ê³¼ ì²˜ë¦¬ ì‹œê°„ì„ ë¶„ë¦¬í•´ì„œ ë‹¤ë£¨ê³  ë‹¤ì–‘í•œ ì‹œê°„ ê°„ê²© ì˜µì…˜ì„ ì§€ì›í•˜ê¸°ì— ì‹¤ì‹œê°„ ë¶„ì„ì„ ê°„ë‹¨í•˜ë©´ì„œë„ íš¨ìœ¨ì ìœ¼ë¡œ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. íŠ¹ì§• ê°„ë‹¨í•˜ê³  ê°€ë²¼ìš´ í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê¸° ë•Œë¬¸ì— ê¸°ì¡´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í• ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œì´ë‚˜ ì¹´í”„ì¹´ì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ì—†ìŠµë‹ˆë‹¤. ì´ì¤‘í™”ëœ ë¡œì»¬ ìƒíƒœ ì €ì¥ì†Œë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ì¹´í”„ì¹´ ë¸Œë¡œì»¤ë‚˜ í´ë¼ì´ì–¸íŠ¸ì— ì¥ì• ê°€ ìƒê¸°ë”ë¼ë„ ìŠ¤íŠ¸ë¦¼ì— ëŒ€í•´ì„œ 1ë²ˆë§Œ ì²˜ë¦¬ê°€ ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë°€ë¦¬ì´ˆ ë‹¨ìœ„ì˜ ì²˜ë¦¬ ì§€ì—°ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ í•œë²ˆì— í•œ ë ˆì½”ë“œë§Œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ê³ ìˆ˜ì¤€ì˜ ìŠ¤íŠ¸ë¦¼ DSL(Domain Specific Language)ì„ ì§€ì›í•˜ê³ , ì €ìˆ˜ì¤€ì˜ í”„ë¡œì„¸ì‹± APIë„ ì œê³µí•©ë‹ˆë‹¤. ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸° ì˜ˆì œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package test.kafka; import org.apache.kafka.common.serialization.Serdes;import org.apache.kafka.streams.KafkaStreams;import org.apache.kafka.streams.StreamsBuilder;import org.apache.kafka.streams.StreamsConfig;import org.apache.kafka.streams.Topology; import java.util.Properties;import java.util.concurrent.CountDownLatch; public class Pipe &#123; public static void main(String[] args) throws Exception &#123; Properties props = new Properties(); props.put(StreamsConfig.APPLICATION_ID_CONFIG, \"jake-streams-pipe\"); props.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, \"localhost:9092\"); props.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass()); props.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass()); final StreamsBuilder builder = new StreamsBuilder(); builder.stream(\"jake-stream-in\").to(\"jake-stream-out\"); final Topology topology = builder.build(); System.out.println(topology.describe()); final KafkaStreams streams = new KafkaStreams(topology, props); final CountDownLatch latch = new CountDownLatch(1); // attach shutdown handler to catch control-c Runtime.getRuntime().addShutdownHook(new Thread(\"streams-shutdown-hook\") &#123; @Override public void run() &#123; streams.close(); latch.countDown(); &#125; &#125;); try &#123; streams.start(); latch.await(); &#125; catch (Throwable e) &#123; System.exit(1); &#125; System.exit(0); &#125; &#125; ì¶œë ¥ ê²°ê³¼ì•„ë˜ì™€ ê°™ì€ í† í´ë¡œì§€ê°€ ë§Œë“¤ì–´ì§„ë‹¤. í•˜ë‚˜ì˜ í† í”½ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•œ í† í”½ì´ ìƒê²¼ë‹¤. ( jake-stream-in ì˜ í† í”½ë‚´ì˜ ë©”ì‹œì§€ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³µì‚¬í•˜ëŠ” jake-stream-out í† í”½ì´ ìƒê²¼ë‹¤) ì‘ìš©jake-stream-outì´ë€ í† í”½ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶„ì„í•œ ê²°ê³¼ë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤. (ex. ë‹¨ì–´ split , ë˜ëŠ” ë‹¨ì–´ ë¹ˆë„ ì„¸ê¸°) ì°¸ê³  ì¹´í”„ì¹´ console-producer console-consumerëŠ” ê·¸ëƒ¥ ì½˜ì†”ë¡œ ë©”ì‹œì§€ ìƒì„±, ì†Œë¹„í•œë‹¤. ì¹´í”„ì¹´ ì„¤ì¹˜ íŒŒì¼ì˜ binì— ìœ„ì¹˜í•´ ìˆìŒ. (http://kafka.apache.org/downloads.html)","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2018-11-21T08:01:00.716Z","updated":"2018-11-21T08:01:00.716Z","comments":true,"path":"2018/11/21/hello-world/","link":"","permalink":"http://kjs850.github.io/2018/11/21/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Starthttps://hyunseob.github.io/2016/02/23/start-hexo/ Create a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}